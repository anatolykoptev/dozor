# Dozor Configuration
# All settings are optional — dozor works zero-config for local Docker setups.

# ── Host ──────────────────────────────────────────────
DOZOR_HOST=local                    # local, localhost, 127.0.0.1, or SSH user@host
# DOZOR_SSH_PORT=22                 # SSH port (only for remote hosts)
DOZOR_TIMEOUT=30                    # Command timeout in seconds
DOZOR_MCP_PORT=8765                 # MCP HTTP server port

# ── Docker Compose ────────────────────────────────────
# DOZOR_COMPOSE_PATH=~/myproject    # Auto-detected if not set (searches cwd, home)
# DOZOR_SERVICES=web,api,postgres   # Auto-discovered if not set

# ── Systemd Services ─────────────────────────────────
# DOZOR_SYSTEMD_SERVICES=nginx,myapp  # Local systemd services to monitor

# ── Remote Server ─────────────────────────────────────
# DOZOR_REMOTE_HOST=user@server.com   # SSH access to remote server
# DOZOR_REMOTE_URL=https://example.com  # HTTP(S) URL to check availability + SSL
# DOZOR_REMOTE_SERVICES=nginx,php-fpm   # Remote systemd services to check via SSH
# DOZOR_REMOTE_SSH_PORT=22             # SSH port for remote server (default 22)
# Note: server_remote_exec tool allows executing validated commands on the remote
# server via SSH. Commands pass through the same blocklist as server_exec.
# For service restarts, configure sudoers on the remote server:
#   user ALL=(ALL) NOPASSWD: /usr/bin/systemctl restart nginx, ...

# ── Watch Mode ────────────────────────────────────────
# DOZOR_WEBHOOK_URL=                  # Webhook URL for alert notifications
DOZOR_WATCH_INTERVAL=4h              # Health check interval

# ── Alert Thresholds ─────────────────────────────────
DOZOR_CPU_THRESHOLD=90               # CPU usage alert threshold (%)
DOZOR_MEMORY_THRESHOLD=90            # Memory usage alert threshold (%)
DOZOR_ERROR_THRESHOLD=5              # Error count alert threshold
DOZOR_RESTART_THRESHOLD=1            # Restart count alert threshold
DOZOR_LOG_LINES=100                  # Default log lines to analyze

# ── Binary Updates ────────────────────────────────────
# DOZOR_TRACKED_BINARIES=cli/cli:gh,jesseduffield/lazygit  # owner/repo:binary (comma-separated)
# DOZOR_GITHUB_TOKEN=                 # GitHub token for higher API rate limits (60/hr -> 5000/hr)

# ── Security ──────────────────────────────────────────
# DOZOR_REQUIRED_AUTH_VARS=           # Auth env vars to check in compose config (comma-separated)

# ── LLM (required for gateway/smart-watch modes) ────
# DOZOR_LLM_URL=http://127.0.0.1:8787/v1  # OpenAI-compatible API base URL
# DOZOR_LLM_MODEL=gemini-2.5-flash         # Model name
# DOZOR_LLM_API_KEY=                        # API key for LLM provider
# DOZOR_MAX_TOOL_ITERATIONS=10              # Max tool call iterations per request

# ── A2A Protocol (optional, for agent-to-agent) ─────
# DOZOR_A2A_SECRET=                         # Bearer token for A2A endpoint auth
# DOZOR_A2A_AGENTS=agent1=http://host:port,agent2=http://host:port  # Remote A2A agents

# ── Remote MCP Servers (optional) ───────────────────
# DOZOR_MCP_SERVERS=go_search=http://127.0.0.1:8890/mcp  # Remote MCP servers (id=url,id=url)

# ── Telegram Bot (optional) ─────────────────────────
# DOZOR_TELEGRAM_TOKEN=                     # Telegram bot token from @BotFather
# DOZOR_TELEGRAM_ALLOWED=428660,123456      # Comma-separated allowed user IDs

# ── Web Search (optional) ───────────────────────────
# DOZOR_BRAVE_API_KEY=                       # Brave Search API key
# DOZOR_BRAVE_MAX_RESULTS=5                  # Max results from Brave
# DOZOR_BRAVE_ENABLED=false                  # Enable Brave Search
# DOZOR_DDG_MAX_RESULTS=5                    # Max results from DuckDuckGo
# DOZOR_DDG_ENABLED=true                     # Enable DuckDuckGo (default, no API key needed)
# DOZOR_PERPLEXITY_API_KEY=                  # Perplexity API key
# DOZOR_PERPLEXITY_MAX_RESULTS=5             # Max results from Perplexity
# DOZOR_PERPLEXITY_ENABLED=false             # Enable Perplexity Search
